L.Control.Basemaps=L.Control.extend({_map:null,includes:L.Mixin.Events,options:{position:"bottomright",tileX:0,tileY:0,tileZ:0,layers:[]},basemap:null,onAdd:function(e){this._map=e;var t=L.DomUtil.create("div","basemaps leaflet-control closed");return L.DomEvent.disableClickPropagation(t),L.Browser.touch||L.DomEvent.disableScrollPropagation(t),this.options.basemaps.forEach(function(n,r){var i="basemap";r===0?(this.basemap=n,this._map.addLayer(n),i+=" active"):r===1&&(i+=" alt");var s={x:this.options.tileX,y:this.options.tileY},o=L.Util.template(n._url,L.extend({s:n._getSubdomain(s),x:s.x,y:n.options.tms?n._globalTileRange.max.y-s.y:s.y,z:this.options.tileZ},n.options)),u=L.DomUtil.create("div",i,t),a=L.DomUtil.create("img",null,u);a.src=o,n.options&&n.options.label&&(a.title=n.options.label),L.DomEvent.on(u,"click",function(){if(n!=this.basemap){e.removeLayer(this.basemap),e.addLayer(n),n.bringToBack(),e.fire("baselayerchange",this.basemap),this.basemap=n,L.DomUtil.removeClass(document.getElementsByClassName("basemap active")[0],"active"),L.DomUtil.addClass(u,"active");var t=r===0?1:0;L.DomUtil.removeClass(document.getElementsByClassName("basemap alt")[0],"alt"),L.DomUtil.addClass(document.getElementsByClassName("basemap")[t],"alt")}},this)},this),L.DomEvent.on(t,"mouseenter",function(){L.DomUtil.removeClass(t,"closed")},this),L.DomEvent.on(t,"mouseleave",function(){L.DomUtil.addClass(t,"closed")},this),this._container=t,this._container}}),L.control.basemaps=function(e){return new L.Control.Basemaps(e)};